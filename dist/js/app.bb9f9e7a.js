(()=>{"use strict";var e={4284:(e,t,n)=>{n(752),n(3964),n(429),n(6409);var r=n(9242),a=n(9306);function o(e,t){var n=(0,a.up)("router-link"),r=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("nav",null,[(0,a.Wm)(n,{to:"/"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Home")]})),_:1}),(0,a.Uk)(" | "),(0,a.Wm)(n,{to:"/new"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Add Policyholder")]})),_:1}),(0,a.Uk)(" | "),(0,a.Wm)(n,{to:"/claims"},{default:(0,a.w5)((function(){return[(0,a.Uk)("View Claim Notes")]})),_:1}),(0,a.Uk)(" | "),(0,a.Wm)(n,{to:"/claims/new"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Upload Claim Note")]})),_:1}),(0,a.Uk)(" | "),(0,a.Wm)(n,{to:"/claims/gen"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Generate Claim Notes")]})),_:1}),(0,a.Uk)(" | "),(0,a.Wm)(n,{to:"/analysis"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Analysis")]})),_:1})]),(0,a.Wm)(r)],64)}var i=n(7477);const l={},c=(0,i.Z)(l,[["render",o]]),s=c;var u=n(6887),d=n(5669),p=(n(24),n(2320),n(2483)),m=n(8351),h=(n(9772),n(560),n(8077),n(228),n(278),n(939),n(886),n(9693),n(7522),n(4338),n(1694),n(6265),n(8730),n(9307),n(8858),n(1318),n(3228),n(7453),n(3975),n(5728),n(65)),f=n(6705),y="http://matlowaiassignmentfastapiapp-dns-name.westus2.azurecontainer.io:8001";const g=(0,h.MT)({state:{policyholders:[],claimNotes:[],claims:[],token:localStorage.getItem("token")||null,averagePolicyAmount:0,incidentTypeAnalysis:{textfile_category_counts:{},textfile_category_averages:{},gptmsg_category_counts:{},gptmsg_category_averages:{}}},mutations:{SET_POLICYHOLDERS:function(e,t){e.policyholders=t},SET_CURRENT_POLICYHOLDER:function(e,t){e.currentPolicyholder=t},UPDATE_POLICYHOLDER:function(e,t){var n=e.policyholders.findIndex((function(e){return e.id===t.id}));-1!==n&&(e.policyholders[n]=t)},SET_CLAIM_NOTES:function(e,t){e.claimNotes=t},ADD_CLAIM_NOTE:function(e,t){e.claimNotes.push(t)},SET_CLAIMS:function(e,t){e.claims=t},UPDATE_CLAIM:function(e,t){var n=t.id,r=t.gptmsg,a=e.claims.findIndex((function(e){return e.id===n}));-1!==a&&(e.claims[a].gptmsg=r)},REMOVE_CLAIM:function(e,t){e.claims=e.claims.filter((function(e){return e.id!==t}))},SET_TOKEN:function(e,t){var n=t.token,r=t.expiresIn,a=(new Date).getTime()+1e3*r;e.token=n,localStorage.setItem("token",n),localStorage.setItem("tokenExpiry",a)},CLEAR_TOKEN:function(e){e.token=null,localStorage.removeItem("token"),localStorage.removeItem("tokenExpiry")},SET_AVERAGE_POLICY_AMOUNT:function(e,t){e.averagePolicyAmount=t},SET_INCIDENT_TYPE_ANALYSIS:function(e,t){e.incidentTypeAnalysis.textfile_category_counts=t.textfile_category_counts,e.incidentTypeAnalysis.textfile_category_averages=t.textfile_category_averages,e.incidentTypeAnalysis.gptmsg_category_counts=t.gptmsg_category_counts,e.incidentTypeAnalysis.gptmsg_category_averages=t.gptmsg_category_averages},UPDATE_CLAIM_ANALYSIS:function(e,t){var n=t.claimId,r=t.analysis,a=e.claims.findIndex((function(e){return e.id===n}));-1!==a&&(e.claims[a].analysis=r)}},actions:{login:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.prev=1,n.next=4,f.Z.post("http://matlowaiassignmentfastapiapp-dns-name.westus2.azurecontainer.io:8001/exchange-code",{code:t});case 4:a=n.sent,o=3600,r("SET_TOKEN",{token:a.data.token,expiresIn:o}),n.next=13;break;case 9:throw n.prev=9,n.t0=n["catch"](1),console.error("Login error:",n.t0),n.t0;case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))()},logout:function(e){var t=e.commit;t("CLEAR_TOKEN")},fetchAveragePolicyAmount:function(e){return(0,d.Z)((0,u.Z)().mark((function t(){var n,r,a,o,i,l;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,t.prev=1,t.next=4,f.Z.get("".concat(y,"/policyholders"),{headers:{Authorization:"Bearer ".concat(r.token)}});case 4:a=t.sent,o=a.data.policyholders,i=o.reduce((function(e,t){return e+parseFloat(t.policy_amount)}),0),l=o.length>0?i/o.length:0,n("SET_AVERAGE_POLICY_AMOUNT",l),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.error("Error fetching average policy amount:",t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()},processClaims:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o,i,l;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,n.prev=1,o=t.length?t:a.claims.map((function(e){return e.id})),n.next=5,f.Z.post("".concat(y,"/process-claims"),{claimIds:o},{headers:{Authorization:"Bearer ".concat(a.token)}});case 5:for(l in i=n.sent,i.data)i.data.hasOwnProperty(l)&&r("UPDATE_CLAIM",{id:l,gptmsg:i.data[l]});n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error("Error processing claims:",n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},analyzeClaims:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o,i,l;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,o=t.claims,i=t.betterPrompt,n.prev=2,o.map((function(e){return{id:e.id,textfile:e.textfile,gptmsg:e.gptmsg}})),n.next=6,f.Z.post("".concat(y,"/claims-analysis"),{claims:o,betterPrompt:i},{headers:{Authorization:"Bearer ".concat(a.token)}});case 6:l=n.sent,l.data.analysis.forEach((function(e){r("UPDATE_CLAIM_ANALYSIS",{claimId:e.id,analysis:e})})),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](2),console.error("Error in claims analysis:",n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},fetchAnalysisData:function(e){return(0,d.Z)((0,u.Z)().mark((function t(){var n,r,a;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,t.prev=1,t.next=4,f.Z.post("".concat(y,"/analyze-claims"),{},{headers:{Authorization:"Bearer ".concat(r.token)}});case 4:a=t.sent,n("SET_INCIDENT_TYPE_ANALYSIS",a.data),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Error fetching analysis data:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},downloadFile:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o,i;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.state,n.prev=1,n.next=4,f.Z.get("".concat(y,"/download/").concat(t),{headers:{Authorization:"Bearer ".concat(r.token)},responseType:"blob"});case 4:a=n.sent,o=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a"),i.href=o,i.setAttribute("download",t),document.body.appendChild(i),i.click(),document.body.removeChild(i),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](1),console.error("Error downloading file:",n.t0);case 17:case"end":return n.stop()}}),n,null,[[1,14]])})))()},fetchPolicyholders:function(e){return(0,d.Z)((0,u.Z)().mark((function t(){var n,r,a;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,t.prev=1,t.next=4,f.Z.get("".concat(y,"/policyholders"),{headers:{Authorization:"Bearer ".concat(r.token)}});case 4:a=t.sent,n("SET_POLICYHOLDERS",a.data.policyholders),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Error fetching policyholders:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},fetchPolicyholder:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,n.prev=1,n.next=4,f.Z.get("".concat(y,"/policyholders/").concat(t),{headers:{Authorization:"Bearer ".concat(a.token)}});case 4:o=n.sent,r("SET_CURRENT_POLICYHOLDER",o.data.policyholder),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.error("Error fetching policyholder:",n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},createPolicyholder:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=e.state,n.prev=1,n.next=4,f.Z.post("".concat(y,"/policyholders"),t,{headers:{Authorization:"Bearer ".concat(a.token)}});case 4:r("fetchPolicyholders"),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("Error creating policyholder:",n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},generateSyntheticPolicyholders:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=e.state,n.prev=1,n.next=4,f.Z.post("".concat(y,"/generate-synthetic-policyholders"),{number_of_policyholders:t,add_to_database:!0},{headers:{Authorization:"Bearer ".concat(a.token)}});case 4:r("fetchPolicyholders"),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("Error generating synthetic policyholders:",n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},fetchClaimNotes:function(e){return(0,d.Z)((0,u.Z)().mark((function t(){var n,r,a;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,t.prev=1,t.next=4,f.Z.get("".concat(y,"/claim-notes"),{headers:{Authorization:"Bearer ".concat(r.token)}});case 4:a=t.sent,n("SET_CLAIM_NOTES",a.data.claim_notes.map((function(e){return(0,m.Z)((0,m.Z)({},e),{},{downloadUrl:"".concat(y,"/download/").concat(e.name)})}))),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Error fetching claim notes:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},deleteClaims:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,n.prev=1,n.next=4,f.Z.post("".concat(y,"/delete-claims"),{claimIds:t},{headers:{Authorization:"Bearer ".concat(a.token)}});case 4:t.forEach((function(e){r("REMOVE_CLAIM",e)})),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("Error deleting claims:",n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},addClaim:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o,i,l,c,s,d;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,o=t.policyholderId,i=t.details,l=t.generateRandom,c=void 0!==l&&l,n.prev=2,s=c?{policyholder_id:o,generate_random:!0}:{policyholder_id:o,details:i},n.next=6,f.Z.post("".concat(y,"/add-claim"),s,{headers:{Authorization:"Bearer ".concat(a.token)}});case 6:d=n.sent,r("ADD_CLAIM_NOTE",d.data.claim_note),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](2),console.error("Error adding claim:",n.t0);case 13:case"end":return n.stop()}}),n,null,[[2,10]])})))()},fetchClaims:function(e){return(0,d.Z)((0,u.Z)().mark((function t(){var n,r,a;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.state,t.prev=1,t.next=4,f.Z.get("".concat(y,"/claims"),{headers:{Authorization:"Bearer ".concat(r.token)}});case 4:a=t.sent,n("SET_CLAIMS",a.data.claims),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("Error fetching claims:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},fetchClaimsForPolicyholder:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o,i;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,n.prev=1,o=Array.isArray(t)?t:[t],n.next=5,f.Z.get("".concat(y,"/claims"),{params:{policyholder_ids:o},headers:{Authorization:"Bearer ".concat(a.token)}});case 5:i=n.sent,r("SET_CLAIMS",i.data.claims),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error("Error fetching claims for policyholder(s):",n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},searchPolicyholders:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,n.prev=1,n.next=4,f.Z.post("".concat(y,"/policyholders/search"),{name:t},{headers:{Authorization:"Bearer ".concat(a.token)}});case 4:o=n.sent,r("SET_POLICYHOLDERS",o.data.policyholders),n.next=12;break;case 8:throw n.prev=8,n.t0=n["catch"](1),console.error("Error searching policyholders:",n.t0),n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},generateClaimNotes:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o,i,l;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,o=t.numberOfNotes,i=t.policyholderIds,n.prev=2,n.next=5,f.Z.post("".concat(y,"/generate-claim-notes"),{number_of_notes:o,policyholder_ids:i},{headers:{Authorization:"Bearer ".concat(a.token)}});case 5:l=n.sent,l.data.uploaded_notes.forEach((function(e){r("ADD_CLAIM_NOTE",e)})),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](2),console.error("Error generating claim notes:",n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},uploadClaimNote:function(e,t){return(0,d.Z)((0,u.Z)().mark((function n(){var r,a,o,i;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.commit,r=e.state,a=t.claimId,o=t.file,n.prev=2,i=new FormData,i.append("file",o),i.append("claimId",a),n.next=8,f.Z.post("".concat(y,"/claim-notes"),i,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r.token)}});case 8:n.sent,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),console.error("Error uploading claim note:",n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()},isAuthenticated:function(e){return!!e.token},allClaimNotes:function(e){return e.claimNotes},getClaimNoteById:function(e){return function(t){return e.claimNotes.find((function(e){return e.id===t}))}}}});var v=n(7139),_={class:"policyholders-container"},w=(0,a._)("header",{class:"policyholders-header"},[(0,a._)("h2",null,"Policyholders")],-1),b={class:"search-container"},k=(0,a._)("label",{for:"all"},"All Policyholders",-1),C=(0,a._)("label",{for:"search"},"Search",-1),Z={key:0,class:"policyholders-table"},A=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Name"),(0,a._)("th",null,"Age"),(0,a._)("th",null,"Start Date"),(0,a._)("th",null,"Amount"),(0,a._)("th",null,"Actions")])],-1),x={key:1,class:"no-policyholders"};function P(e,t,n,o,i,l){var c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",_,[w,(0,a._)("div",b,[(0,a.wy)((0,a._)("input",{type:"radio",id:"all",value:"all","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.searchMode=e}),onChange:t[1]||(t[1]=function(){return l.fetchPolicyholders&&l.fetchPolicyholders.apply(l,arguments)})},null,544),[[r.G2,i.searchMode]]),k,(0,a.wy)((0,a._)("input",{type:"radio",id:"search",value:"search","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.searchMode=e})},null,512),[[r.G2,i.searchMode]]),C,"search"===i.searchMode?(0,a.wy)(((0,a.wg)(),(0,a.iD)("input",{key:0,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.searchQuery=e}),placeholder:"Enter name to search"},null,512)),[[r.nr,i.searchQuery]]):(0,a.kq)("",!0),"search"===i.searchMode?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:t[4]||(t[4]=function(){return l.searchPolicyholders&&l.searchPolicyholders.apply(l,arguments)})},"Search")):(0,a.kq)("",!0)]),e.policyholders&&e.policyholders.length?((0,a.wg)(),(0,a.iD)("table",Z,[A,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.policyholders,(function(t){return(0,a.wg)(),(0,a.iD)("tr",{key:t.id},[(0,a._)("td",null,(0,v.zw)(t.name),1),(0,a._)("td",null,(0,v.zw)(t.age),1),(0,a._)("td",null,(0,v.zw)(t.policy_start_date),1),(0,a._)("td",null,(0,v.zw)(t.policy_amount|e.currencyFormat),1),(0,a._)("td",null,[(0,a.Wm)(c,{to:"/edit/".concat(t.id),class:"action-button"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Edit")]})),_:2},1032,["to"]),(0,a.Wm)(c,{to:"/claims/manage/".concat(t.id),class:"action-button"},{default:(0,a.w5)((function(){return[(0,a.Uk)("Add Claim")]})),_:2},1032,["to"]),l.hasClaims[t.id]?((0,a.wg)(),(0,a.j4)(c,{key:0,to:"/claims/view/".concat(t.id),class:(0,v.C_)(["action-button",{inactive:!l.hasClaims[t.id]}])},{default:(0,a.w5)((function(){return[(0,a.Uk)("View Claims")]})),_:2},1032,["to","class"])):(0,a.kq)("",!0)])])})),128))])])):((0,a.wg)(),(0,a.iD)("p",x,"No policyholders found."))])}n(7550),n(8436);const D={computed:(0,m.Z)((0,m.Z)({},(0,h.rn)(["policyholders","claims"])),{},{hasClaims:function(){var e=this,t={};return this.policyholders.forEach((function(n){t[n.id]=e.claims.some((function(e){return e.policyholder_id===n.id}))})),t}}),data:function(){return{searchMode:"search",searchQuery:""}},methods:{fetchPolicyholders:function(){"all"===this.searchMode&&(this.$store.dispatch("fetchPolicyholders"),this.$store.dispatch("fetchClaims"))},searchPolicyholders:function(){var e=this;this.searchQuery.trim()?this.$store.dispatch("searchPolicyholders",this.searchQuery).then((function(){var t=e.policyholders.map((function(e){return e.id}));return e.$store.dispatch("fetchClaimsForPolicyholder",t)}))["catch"]((function(e){console.error("Error in search process:",e)})):this.fetchPolicyholders()}},mounted:function(){}},E=(0,i.Z)(D,[["render",P]]),S=E;var I=(0,a._)("h2",null,"New Policyholder",-1),N=(0,a._)("label",{for:"name"},"Name:",-1),T=(0,a._)("label",{for:"age"},"Age:",-1),z=(0,a._)("label",{for:"date"},"Policy Start Date:",-1),U=(0,a._)("label",{for:"amount"},"Policy Amount:",-1),O=(0,a._)("button",{type:"submit"},"Create Policyholder",-1);function L(e,t,n,o,i,l){return(0,a.wg)(),(0,a.iD)("div",null,[I,(0,a._)("form",{onSubmit:t[4]||(t[4]=(0,r.iM)((function(){return l.handleSubmit&&l.handleSubmit.apply(l,arguments)}),["prevent"]))},[(0,a._)("div",null,[N,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.policyholder.name=e}),id:"name",required:""},null,512),[[r.nr,i.policyholder.name]])]),(0,a._)("div",null,[T,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.policyholder.age=e}),id:"age",required:""},null,512),[[r.nr,i.policyholder.age,void 0,{number:!0}]])]),(0,a._)("div",null,[z,(0,a.wy)((0,a._)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.policyholder.policy_start_date=e}),id:"date",required:""},null,512),[[r.nr,i.policyholder.policy_start_date]])]),(0,a._)("div",null,[U,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return i.policyholder.policy_amount=e}),id:"amount",step:"0.01",required:""},null,512),[[r.nr,i.policyholder.policy_amount,void 0,{number:!0}]])]),O],32),(0,a._)("div",null,[(0,a._)("button",{onClick:t[5]||(t[5]=function(){return l.generateRandom&&l.generateRandom.apply(l,arguments)})},"Generate Random Policyholders"),(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=function(e){return i.randomCount=e}),min:"1",placeholder:"Count"},null,512),[[r.nr,i.randomCount,void 0,{number:!0}]])])])}var M=n(8976);const R={data:function(){return{policyholder:{id:"",name:"",age:null,policy_start_date:"",policy_amount:null},randomCount:1}},methods:(0,m.Z)((0,m.Z)({},(0,h.nv)(["createPolicyholder","generateSyntheticPolicyholders"])),{},{handleSubmit:function(){this.policyholder.id||(this.policyholder.id=(0,M.Z)()),this.createPolicyholder(this.policyholder),this.resetForm()},generateRandom:function(){this.generateSyntheticPolicyholders(this.randomCount)},resetForm:function(){this.policyholder={id:"",name:"",age:null,policy_start_date:"",policy_amount:null}}})},F=(0,i.Z)(R,[["render",L]]),B=F;var V={key:1},H=(0,a._)("h2",null,"Edit Policyholder",-1),Y=(0,a._)("label",{for:"name"},"Name:",-1),q=(0,a._)("label",{for:"age"},"Age:",-1),j=(0,a._)("label",{for:"policyStartDate"},"Policy Start Date:",-1),G=(0,a._)("label",{for:"policyAmount"},"Policy Amount:",-1),$=(0,a._)("button",{type:"submit"},"Save Changes",-1),K={key:2},W=(0,a._)("p",null,"Loading policyholder data...",-1),Q=[W];function J(e,t,n,o,i,l){return(0,a.wg)(),(0,a.iD)(a.HY,null,[o.notification.show?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,v.C_)(["notification",{error:o.notification.isError}])},(0,v.zw)(o.notification.message),3)):(0,a.kq)("",!0),o.policyholder?((0,a.wg)(),(0,a.iD)("div",V,[H,(0,a._)("form",{onSubmit:t[4]||(t[4]=(0,r.iM)((function(){return o.handleSubmit&&o.handleSubmit.apply(o,arguments)}),["prevent"]))},[(0,a._)("div",null,[Y,(0,a.wy)((0,a._)("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.policyholder.name=e}),required:""},null,512),[[r.nr,o.policyholder.name]])]),(0,a._)("div",null,[q,(0,a.wy)((0,a._)("input",{id:"age",type:"number","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.policyholder.age=e}),required:""},null,512),[[r.nr,o.policyholder.age,void 0,{number:!0}]])]),(0,a._)("div",null,[j,(0,a.wy)((0,a._)("input",{id:"policyStartDate",type:"date","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.policyholder.policy_start_date=e}),required:""},null,512),[[r.nr,o.policyholder.policy_start_date]])]),(0,a._)("div",null,[G,(0,a.wy)((0,a._)("input",{id:"policyAmount",type:"number","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.policyAmountModel=e}),step:"0.01",required:""},null,512),[[r.nr,o.policyAmountModel,void 0,{lazy:!0,number:!0}]])]),$],32)])):((0,a.wg)(),(0,a.iD)("div",K,Q))],64)}n(7389),n(6869);var X=n(2446);const ee={setup:function(){var e=(0,h.oR)(),t=useRouter(),n=(0,p.yj)(),r=n.params.id,o=(0,X.iH)(null),i=function(){var n=(0,d.Z)((0,u.Z)().mark((function n(){var a;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.getters.isAuthenticated){n.next=3;break}return t.push("/login"),n.abrupt("return");case 3:if(e.state.policyholders.some((function(e){return e.id===r}))){n.next=16;break}return n.prev=4,n.next=7,f.Z.get("http://matlowaiassignmentfastapiapp-dns-name.westus2.azurecontainer.io:8001/policyholders/".concat(r));case 7:a=n.sent,o.value=a.data.policyholder,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](4),console.error("Error fetching policyholder:",n.t0);case 14:n.next=17;break;case 16:o.value=e.state.policyholders.find((function(e){return e.id===r}));case 17:case"end":return n.stop()}}),n,null,[[4,11]])})));return function(){return n.apply(this,arguments)}}();(0,a.bv)(i);var l=(0,a.Fl)({get:function(){return(o.value.policy_amount||0).toFixed(2)},set:function(e){o.value=(0,m.Z)((0,m.Z)({},o.value),{},{policy_amount:parseFloat(e)})}}),c=(0,X.iH)({show:!1,message:"",isError:!1}),s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.value={show:!0,message:e,isError:t},setTimeout((function(){return c.value.show=!1}),3e3)},y=function(){var n=(0,d.Z)((0,u.Z)().mark((function n(){var a,i;return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.getters.isAuthenticated){n.next=3;break}return t.push("/login"),n.abrupt("return");case 3:return n.prev=3,a=(0,m.Z)((0,m.Z)({},o.value),{},{policy_amount:parseFloat(l.value)}),n.next=7,f.Z.put("http://matlowaiassignmentfastapiapp-dns-name.westus2.azurecontainer.io:8001/policyholders/".concat(r),a);case 7:i=n.sent,200===i.status?(e.commit("UPDATE_POLICYHOLDER",i.data.policyholder),s("Policyholder updated successfully")):(s("Error updating policyholder",!0),console.error("Error updating policyholder:",i.data)),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),console.error("Error updating policyholder:",n.t0);case 14:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(){return n.apply(this,arguments)}}();return{policyholder:o,handleSubmit:y,policyAmountModel:l,notification:c}}},te=(0,i.Z)(ee,[["render",J]]),ne=te;var re={class:"claim-notes-container"},ae=(0,a._)("h2",null,"Claim Notes List for Blobs",-1),oe={key:0,class:"claim-notes-list"},ie={class:"claim-note-name"},le=["onClick"],ce=["onClick"],se={key:1},ue={key:2,class:"modal"},de={key:0};function pe(e,t,n,r,o,i){return(0,a.wg)(),(0,a.iD)("div",re,[ae,e.claimNotes&&e.claimNotes.length?((0,a.wg)(),(0,a.iD)("ul",oe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.claimNotes,(function(t){return(0,a.wg)(),(0,a.iD)("li",{key:t.name,class:"claim-note-item"},[(0,a._)("span",ie,(0,v.zw)(t.name),1),(0,a._)("button",{onClick:function(e){return i.viewNoteDetails(t)}},"View Details",8,le),(0,a._)("button",{onClick:function(n){return e.downloadFile(t.name)}},"Download File",8,ce)])})),128))])):((0,a.wg)(),(0,a.iD)("p",se,"No claim notes found.")),o.selectedNote?((0,a.wg)(),(0,a.iD)("div",ue,[(0,a._)("h3",null,(0,v.zw)(o.selectedNote.name),1),o.selectedNote.metadata?((0,a.wg)(),(0,a.iD)("p",de,(0,v.zw)(i.formatMetadata(o.selectedNote.metadata)),1)):(0,a.kq)("",!0),(0,a._)("button",{onClick:t[0]||(t[0]=function(e){return o.selectedNote=null})},"Close")])):(0,a.kq)("",!0)])}var me=n(7386);n(6203),n(6585);const he={data:function(){return{selectedNote:null}},computed:(0,m.Z)((0,m.Z)({},(0,h.rn)(["claimNotes","token"])),{},{apiUrl:function(){return this.$store.state.apiUrl}}),methods:(0,m.Z)((0,m.Z)({},(0,h.nv)(["fetchClaimNotes","downloadFile"])),{},{viewNoteDetails:function(e){this.selectedNote=e},formatMetadata:function(e){return Object.entries(e).map((function(e){var t=(0,me.Z)(e,2),n=t[0],r=t[1];return"".concat(n,": ").concat(r)})).join(", ")},handleDownload:function(e){this.downloadFile(e)}}),mounted:function(){this.fetchClaimNotes()}},fe=(0,i.Z)(he,[["render",pe]]),ye=fe;var ge={class:"upload-claim-note-container"},ve=(0,a._)("h2",null,"Upload Claim Note",-1),_e=(0,a._)("label",{for:"claimId"},"Claim ID:",-1),we=(0,a._)("label",{for:"file"},"Claim Note File:",-1),be={type:"file",id:"file",ref:"fileInput",required:""},ke=(0,a._)("button",{type:"submit"},"Upload",-1);function Ce(e,t,n,o,i,l){return(0,a.wg)(),(0,a.iD)("div",ge,[ve,(0,a._)("form",{onSubmit:t[1]||(t[1]=(0,r.iM)((function(){return l.handleUpload&&l.handleUpload.apply(l,arguments)}),["prevent"]))},[(0,a._)("div",null,[_e,(0,a.wy)((0,a._)("input",{type:"text",id:"claimId","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.claimId=e}),required:""},null,512),[[r.nr,i.claimId]])]),(0,a._)("div",null,[we,(0,a._)("input",be,null,512)]),ke],32)])}const Ze={data:function(){return{claimId:""}},methods:(0,m.Z)((0,m.Z)({},(0,h.nv)(["uploadClaimNote"])),{},{handleUpload:function(){var e=this;return(0,d.Z)((0,u.Z)().mark((function t(){var n,r;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$refs.fileInput,!(n&&n.files.length>0&&e.claimId)){t.next=11;break}return r=n.files[0],t.prev=3,t.next=6,e.uploadClaimNote({claimId:e.claimId,file:r});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](3),console.error("Error uploading claim note:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})))()}})},Ae=(0,i.Z)(Ze,[["render",Ce]]),xe=Ae;var Pe={class:"generate-claim-notes-container"},De=(0,a._)("h2",null,"Generate Claim Notes",-1),Ee=(0,a._)("label",{for:"numberOfNotes"},"Number of Notes:",-1),Se=(0,a._)("label",null,"Select Policyholders:",-1),Ie=["value"],Ne=(0,a._)("button",{type:"submit"},"Generate",-1);function Te(e,t,n,o,i,l){return(0,a.wg)(),(0,a.iD)("div",Pe,[De,(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,r.iM)((function(){return l.handleGenerate&&l.handleGenerate.apply(l,arguments)}),["prevent"]))},[(0,a._)("div",null,[Ee,(0,a.wy)((0,a._)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.numberOfNotes=e}),min:"1",id:"numberOfNotes",required:""},null,512),[[r.nr,i.numberOfNotes,void 0,{number:!0}]])]),(0,a._)("div",null,[Se,(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.selectedPolicyholderIds=e}),multiple:""},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.policyholders,(function(e){return(0,a.wg)(),(0,a.iD)("option",{value:e.id,key:e.id},(0,v.zw)(e.name),9,Ie)})),128))],512),[[r.bM,i.selectedPolicyholderIds]])]),Ne],32)])}const ze={data:function(){return{numberOfNotes:1,selectedPolicyholderIds:[]}},computed:(0,m.Z)({},(0,h.rn)(["policyholders"])),methods:(0,m.Z)((0,m.Z)({},(0,h.nv)(["generateClaimNotes","fetchPolicyholders"])),{},{handleGenerate:function(){var e=this;return(0,d.Z)((0,u.Z)().mark((function t(){return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.generateClaimNotes({numberOfNotes:e.numberOfNotes,policyholderIds:e.selectedPolicyholderIds});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),console.error("Error generating claim notes:",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()}}),mounted:function(){this.fetchPolicyholders()}},Ue=(0,i.Z)(ze,[["render",Te]]),Oe=Ue;var Le={class:"manage-claim-container"},Me={key:0},Re=(0,a._)("label",{for:"details"},"Claim Details:",-1),Fe=(0,a._)("button",{type:"submit"},"Submit Claim",-1);function Be(e,t,n,o,i,l){return(0,a.wg)(),(0,a.iD)("div",Le,[e.policyholder?((0,a.wg)(),(0,a.iD)("h2",Me,"Manage Claim for Policyholder: "+(0,v.zw)(e.policyholder.name)+" (ID: "+(0,v.zw)(e.policyholder.id)+")",1)):(0,a.kq)("",!0),(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,r.iM)((function(){return l.handleSubmit&&l.handleSubmit.apply(l,arguments)}),["prevent"]))},[(0,a._)("div",null,[Re,(0,a.wy)((0,a._)("textarea",{id:"details","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.claimDetails=e})},null,512),[[r.nr,i.claimDetails]])]),(0,a._)("div",null,[(0,a._)("button",{type:"button",onClick:t[1]||(t[1]=function(){return l.generateRandomClaim&&l.generateRandomClaim.apply(l,arguments)})},"Generate Random Claim"),Fe])],32)])}const Ve={data:function(){return{claimDetails:""}},computed:(0,m.Z)({},(0,h.rn)({policyholder:function(e){return e.currentPolicyholder}})),setup:function(){var e=(0,p.yj)(),t=(0,h.oR)();return(0,a.bv)((function(){t.dispatch("fetchPolicyholder",e.params.id)})),{}},methods:(0,m.Z)((0,m.Z)({},(0,h.nv)(["addClaim","fetchPolicyholder"])),{},{handleSubmit:function(){var e=this;this.addClaim({policyholderId:this.$route.params.id,details:this.claimDetails}).then((function(){e.$router.push("/")}))["catch"]((function(e){alert("Failure: ".concat(e.message))}))},generateRandomClaim:function(){var e=this;this.addClaim({policyholderId:this.$route.params.id,generateRandom:!0}).then((function(){e.$router.push("/")}))["catch"]((function(e){console.error("Policyholder ID is missing",e)}))}})},He=(0,i.Z)(Ve,[["render",Be]]),Ye=He;var qe={class:"view-claims-container"},je=(0,a._)("h2",null,"Claims for Policyholder",-1),Ge={key:0,class:"claims-list"},$e=["value"],Ke=["onMouseover","onClick","title"],We={key:0},Qe={key:1},Je={key:0,class:"gpt-message"},Xe={key:0},et={key:1},tt={key:1},nt={class:"actions-container"};function rt(e,t,n,o,i,l){return(0,a.wg)(),(0,a.iD)("div",qe,[je,i.generatedClaims&&i.generatedClaims.length?((0,a.wg)(),(0,a.iD)("ul",Ge,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.generatedClaims,(function(e){return(0,a.wg)(),(0,a.iD)("li",{key:e.id,class:"claim-item"},[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.selectedClaims=e}),value:e.id,class:"claim-checkbox"},null,8,$e),[[r.e8,i.selectedClaims]]),(0,a._)("button",{class:"claim-number-button",onMouseover:function(t){return i.hoveredClaimId=e.id},onMouseleave:t[1]||(t[1]=function(e){return i.hoveredClaimId=null}),onClick:function(t){return l.copyToClipboard(e.id)},title:i.hoveredClaimId===e.id?e.id:""},(0,v.zw)(i.hoveredClaimId===e.id?"Copy":"Claim Number"),41,Ke),(0,a._)("div",null,[e.showTextfileAnalysis?((0,a.wg)(),(0,a.iD)("p",Qe,(0,v.zw)(e.textfileAnalysis),1)):((0,a.wg)(),(0,a.iD)("p",We,(0,v.zw)(e.textfile),1))]),e.gptmsg?((0,a.wg)(),(0,a.iD)("div",Je,[e.showGptmsgAnalysis?((0,a.wg)(),(0,a.iD)("p",et,(0,v.zw)(e.gptmsgAnalysis),1)):((0,a.wg)(),(0,a.iD)("p",Xe,(0,v.zw)(e.gptmsg),1))])):(0,a.kq)("",!0)])})),128))])):((0,a.wg)(),(0,a.iD)("p",tt,"No claims found for this policyholder.")),(0,a._)("div",nt,[(0,a._)("button",{onClick:t[2]||(t[2]=function(){return l.processSelectedClaims&&l.processSelectedClaims.apply(l,arguments)}),class:"action-button"},"Process Selected Claims with GPT"),(0,a._)("button",{onClick:t[3]||(t[3]=function(){return l.deleteSelectedClaims&&l.deleteSelectedClaims.apply(l,arguments)}),class:"action-button"},"Delete Selected Claims")])])}const at={data:function(){return{hoveredClaimId:null,copySuccess:null,selectedClaims:[],generatedClaims:[]}},computed:(0,m.Z)({},(0,h.rn)(["claims"])),methods:(0,m.Z)((0,m.Z)({},(0,h.nv)(["processClaims","deleteClaims","analyzeClaims"])),{},{copyToClipboard:function(e){var t=this;return(0,d.Z)((0,u.Z)().mark((function n(){return(0,u.Z)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!navigator.clipboard||!e){n.next=11;break}return n.prev=1,n.next=4,navigator.clipboard.writeText(e);case 4:t.copySuccess=e,setTimeout((function(){return t.copySuccess=null}),2e3),n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](1),console.error("Failed to copy:",n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})))()},generateFilteredClaims:function(){var e=this;this.generatedClaims=this.claims.filter((function(t){return t.policyholder_id===e.$route.params.id})).map((function(e){return(0,m.Z)((0,m.Z)({},e),{},{showTextfileAnalysis:!1,textfileAnalysis:"",showGptmsgAnalysis:!1,gptmsgAnalysis:""})}))},deleteSelectedClaims:function(){var e=this;return(0,d.Z)((0,u.Z)().mark((function t(){return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.deleteClaims(e.selectedClaims);case 3:e.selectedClaims=[],t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error("Error deleting claims:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},processSelectedClaims:function(){var e=this;return(0,d.Z)((0,u.Z)().mark((function t(){return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.processClaims(e.selectedClaims);case 3:e.selectedClaims=[],t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error("Error processing claims:",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}),mounted:function(){var e=this,t=(0,p.yj)();this.$store.dispatch("fetchClaimsForPolicyholder",t.params.id).then((function(){return e.generateFilteredClaims()}))}},ot=(0,i.Z)(at,[["render",rt]]),it=ot;var lt=function(e){return(0,a.dD)("data-v-2bc84b10"),e=e(),(0,a.Cn)(),e},ct={class:"login-container"},st=lt((function(){return(0,a._)("h1",null,"Login",-1)}));function ut(e,t,n,r,o,i){return(0,a.wg)(),(0,a.iD)("div",ct,[st,(0,a._)("button",{onClick:t[0]||(t[0]=function(){return i.initiateLogin&&i.initiateLogin.apply(i,arguments)})},"Login with OAuth2 Provider")])}n(4043),n(7872);const dt={methods:(0,m.Z)((0,m.Z)({},(0,h.nv)(["login"])),{},{initiateLogin:function(){var e="059fb2ad-7eca-495b-8b94-3440d83f2a67",t="8016037c-54cf-4836-a33f-dfcbc9b47d90",n=encodeURIComponent("https://ashy-rock-000761b1e.4.azurestaticapps.net/login"),r=encodeURIComponent("openid profile email"),a="code",o="https://login.microsoftonline.com/".concat(e,"/oauth2/v2.0/authorize?client_id=").concat(t,"&response_type=").concat(a,"&redirect_uri=").concat(n,"&scope=").concat(r,"&response_mode=query");window.location.href=o},getAuthCodeFromRedirect:function(){var e=new URLSearchParams(window.location.search);return e.get("code")},mounted:function(){var e=this.getAuthCodeFromRedirect();e?(console.log("Authorization Code:",e),this.login(e).then((function(){console.log("Logged in successfully")}))["catch"]((function(e){console.error("Login error:",e)}))):console.log("noAuthOnMount")}})},pt=(0,i.Z)(dt,[["render",ut],["__scopeId","data-v-2bc84b10"]]),mt=pt;var ht={class:"analysis-container"},ft=(0,a._)("header",{class:"analysis-header"},[(0,a._)("h2",null,"Claims Analysis")],-1),yt={class:"average-amount-container"},gt={class:"claims-container"},vt=(0,a._)("h2",null,"All Claims",-1),_t={class:"claims-table"},wt=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Select"),(0,a._)("th",null,"Policyholder ID"),(0,a._)("th",null,"Claim ID"),(0,a._)("th",null,"Textfile"),(0,a._)("th",null,"GPT Message"),(0,a._)("th",null,"File Blob Name")])],-1),bt=["value"],kt={key:0},Ct={key:1},Zt={key:2},At=["innerHTML"],xt={key:3},Pt={class:"incident-type-analysis"},Dt=(0,a._)("h3",null,"Textfile Incident Type Analysis",-1),Et={class:"incident-type-analysis"},St=(0,a._)("h3",null,"Textfile Analysis",-1),It={class:"analysis-table"},Nt=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Incident Type"),(0,a._)("th",null,"Count"),(0,a._)("th",null,"Average Claim Amount")])],-1),Tt=(0,a._)("h3",null,"GPT Message Incident Type Analysis",-1),zt={class:"analysis-table"},Ut=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Incident Type"),(0,a._)("th",null,"Count"),(0,a._)("th",null,"Average Claim Amount")])],-1),Ot={key:0,class:"popup-modal"},Lt=(0,a._)("p",null,"Analysis may take a while. Please wait...",-1);function Mt(e,t,n,o,i,l){var c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",ht,[ft,(0,a._)("div",yt,[(0,a._)("h3",null,"Average Policy Amount: "+(0,v.zw)(e.averagePolicyAmount|l.currencyFormat),1)]),(0,a._)("div",gt,[vt,(0,a._)("table",_t,[wt,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.claims,(function(e){return(0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.selectedClaims=e}),value:e.id},null,8,bt),[[r.e8,i.selectedClaims]])]),(0,a._)("td",null,[(0,a.Wm)(c,{to:"/claims/view/".concat(e.policyholder_id)},{default:(0,a.w5)((function(){return[(0,a.Uk)((0,v.zw)(e.policyholder_id),1)]})),_:2},1032,["to"])]),(0,a._)("td",null,(0,v.zw)(e.id),1),(0,a._)("td",null,(0,v.zw)(e.textfile),1),(0,a._)("td",null,(0,v.zw)(e.gptmsg),1),e.file_blob_name?((0,a.wg)(),(0,a.iD)("td",kt,(0,v.zw)(e.file_blob_name),1)):((0,a.wg)(),(0,a.iD)("td",Ct,"N/A")),e.analysis?((0,a.wg)(),(0,a.iD)("td",Zt,[(0,a._)("td",{innerHTML:l.formatAnalysisData(e.analysis)},null,8,At)])):((0,a.wg)(),(0,a.iD)("td",xt," No Analysis "))])})),128))])]),(0,a.wy)((0,a._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.useBetterPrompt=e})},null,512),[[r.e8,i.useBetterPrompt]]),(0,a.Uk)(" Apply Better Categorization Prompt "),(0,a._)("button",{onClick:t[2]||(t[2]=function(){return l.analyzeSelectedClaims&&l.analyzeSelectedClaims.apply(l,arguments)}),class:"analyze-button"},"Analyze Selected")]),(0,a._)("div",Pt,[Dt,(0,a._)("div",Et,[St,(0,a._)("table",It,[Nt,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.incidentTypeAnalysis.textfile_category_counts,(function(t,n){return(0,a.wg)(),(0,a.iD)("tr",{key:"textfile-".concat(n)},[(0,a._)("td",null,(0,v.zw)(n),1),(0,a._)("td",{class:(0,v.C_)({bold:l.isHighestCount(n,"textfile")})},(0,v.zw)(t),3),(0,a._)("td",null,(0,v.zw)(e.incidentTypeAnalysis.textfile_category_averages[n]|l.currencyFormat),1)])})),128))])])]),Tt,(0,a._)("table",zt,[Ut,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.incidentTypeAnalysis.gptmsg_category_counts,(function(t,n){return(0,a.wg)(),(0,a.iD)("tr",{key:"gptmsg-".concat(n)},[(0,a._)("td",null,(0,v.zw)(n),1),(0,a._)("td",{class:(0,v.C_)({bold:l.isHighestCount(n,"gptmsg")})},(0,v.zw)(t),3),(0,a._)("td",null,(0,v.zw)(e.incidentTypeAnalysis.gptmsg_category_averages[n]|l.currencyFormat),1)])})),128))])])]),(0,a._)("button",{onClick:t[3]||(t[3]=function(){return l.initiateAnalysis&&l.initiateAnalysis.apply(l,arguments)}),class:"analysis-button"},"Initiate Analysis"),i.showPopup?((0,a.wg)(),(0,a.iD)("div",Ot,[Lt,(0,a._)("button",{onClick:t[4]||(t[4]=function(e){return i.showPopup=!1})},"Close")])):(0,a.kq)("",!0)])}var Rt=n(3049);n(6466),n(6801),n(3843),n(9730);const Ft={data:function(){return{showPopup:!1,selectedClaims:[],useBetterPrompt:!1}},computed:(0,m.Z)({},(0,h.rn)(["averagePolicyAmount","incidentTypeAnalysis","claims"])),methods:(0,m.Z)((0,m.Z)({},(0,h.nv)(["fetchAveragePolicyAmount","analyzeClaims","fetchClaims"])),{},{isHighestCount:function(e,t){var n=this.incidentTypeAnalysis["".concat(t,"_category_counts")];if(!n)return!1;var r=n[e];if("undefined"===typeof r)return!1;var a=Math.max.apply(Math,(0,Rt.Z)(Object.values(n)));return r===a},currencyFormat:function(e){return e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e):"$0.00"},analyzeSelectedClaims:function(){var e=this;return(0,d.Z)((0,u.Z)().mark((function t(){var n;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.selectedClaims.length>0)){t.next=6;break}return n=e.claims.filter((function(t){return e.selectedClaims.includes(t.id)})),t.next=4,e.analyzeClaims({claims:n,betterPrompt:e.useBetterPrompt});case 4:t.next=7;break;case 6:alert("Please select at least one claim to analyze.");case 7:case"end":return t.stop()}}),t)})))()},formatAnalysisData:function(e){if(!e)return"No Analysis";var t="";if(e.textfile_analysis){t+="<strong>Textfile Analysis:</strong> ";for(var n=0,r=Object.entries(e.textfile_analysis);n<r.length;n++){var a=(0,me.Z)(r[n],2),o=a[0],i=a[1];t+="".concat(o,": ").concat(i,", ")}t=t.slice(0,-2),t+="<br>"}if(e.gptmsg_analysis){t+="<strong>GPT Message Analysis:</strong> ";for(var l=0,c=Object.entries(e.gptmsg_analysis);l<c.length;l++){var s=(0,me.Z)(c[l],2),u=s[0],d=s[1];t+="".concat(u,": ").concat(d,", ")}t=t.slice(0,-2)}return t},initiateAnalysis:function(){var e=this;return(0,d.Z)((0,u.Z)().mark((function t(){var n;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.showPopup=!0,t.prev=1,n=e.claims.filter((function(e){return!e.analysis})).slice(0,5),!(n.length>0)){t.next=9;break}return t.next=6,e.analyzeClaims(n);case 6:alert("Analysis complete for selected claims"),t.next=10;break;case 9:alert("No more claims to analyze.");case 10:t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](1),console.error("Analysis failed:",t.t0),alert("Analysis failed. Please try again later.");case 16:e.showPopup=!1;case 17:case"end":return t.stop()}}),t,null,[[1,12]])})))()}}),mounted:function(){this.fetchAveragePolicyAmount(),this.$store.dispatch("fetchClaims"),this.$store.dispatch("fetchAnalysisData"),this.$store.dispatch("fetchAveragePolicyAmount")},filters:{currencyFormat:function(e){return e?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e):"$0.00"}}},Bt=(0,i.Z)(Ft,[["render",Mt]]),Vt=Bt;var Ht=[{path:"/",component:S},{path:"/new",component:B},{path:"/edit/:id",component:ne},{path:"/claims",component:ye},{path:"/claims/new",component:xe},{path:"/claims/gen",component:Oe},{path:"/claims/manage/:id",component:Ye},{path:"/claims/view/:id",component:it},{path:"/login",component:mt,name:"login"},{path:"/analysis",component:Vt}],Yt=(0,p.p7)({history:(0,p.PO)(),routes:Ht});Yt.beforeEach(function(){var e=(0,d.Z)((0,u.Z)().mark((function e(t,n,r){var a,o,i;return(0,u.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token"),o=localStorage.getItem("tokenExpiry"),i=!o||(new Date).getTime()>parseInt(o),"/login"===t.path||a&&!i){e.next=8;break}g.commit("CLEAR_TOKEN"),r("/login"),e.next=23;break;case 8:if("/login"!==t.path||!t.query.code){e.next=22;break}return e.prev=9,e.next=12,g.dispatch("login",t.query.code);case 12:r("/"),e.next=20;break;case 15:e.prev=15,e.t0=e["catch"](9),console.error("Login error:",e.t0),alert("Login failed: "+e.t0.message),r("/login");case 20:e.next=23;break;case 22:r();case 23:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,n,r){return e.apply(this,arguments)}}());const qt=Yt;(0,r.ri)(s).use(g).use(qt).mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,(()=>{var e=[];n.O=(t,r,a,o)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,a,o]=e[u],l=!0,c=0;c<r.length;c++)(!1&o||i>=o)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(l=!1,o<i&&(i=o));if(l){e.splice(u--,1);var s=a();void 0!==s&&(t=s)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,a,o]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={143:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,o,[i,l,c]=r,s=0;if(i.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(c)var u=c(n)}for(t&&t(r);s<i.length;s++)o=i[s],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=self["webpackChunkvue_policy"]=self["webpackChunkvue_policy"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[998],(()=>n(4284)));r=n.O(r)})();
//# sourceMappingURL=app.bb9f9e7a.js.map